@use '../../styles/variables' as *;
@use '../../styles/mixins' as *;
@use '../../styles/animations';

.puzzle-cell {
    @include neubrutalism-box-static($white);
    width: 52px;
    height: 52px;
    @include flex-center;
    position: relative;

    @include tablet {
        width: 46px;
        height: 46px;
    }

    @include mobile {
        width: 40px;
        height: 40px;
    }

    // 입력 필드
    input {
        width: 100%;
        height: 100%;
        border: none;
        background: transparent;
        text-align: center;
        font-family: $font-display;
        font-size: $font-size-2xl;
        font-weight: bold;
        color: $black;
        caret-color: $aquamarine;

        @include tablet {
            font-size: $font-size-xl;
        }

        @include mobile {
            font-size: $font-size-lg;
        }

        &:focus {
            outline: none;
        }

        &:disabled {
            color: $navy;
            -webkit-text-fill-color: $navy;
        }
    }

    // ================================
    // 상태별 스타일
    // ================================

    // 블록된 셀
    &--blocked {
        background: $navy;
        pointer-events: none;
        box-shadow: none;
    }

    // 활성 셀
    &--active {
        border-color: $aquamarine;
        box-shadow:
            0 0 0 3px rgba($aquamarine, 0.4),
            $shadow-offset $shadow-offset 0 $black;
        z-index: 2;
    }

    // 같은 단어 하이라이트
    &--highlighted {
        background: rgba($aquamarine, 0.15);
    }

    // 완료된 셀
    &--completed {
        background: rgba($success, 0.1);
        border-color: $success;

        input {
            color: $navy;
            font-weight: bold;
        }
    }

    // ================================
    // 피드백 애니메이션
    // ================================

    // 정답 (초록색 + 펄스)
    &--correct {
        animation:
            flash-success $animation-normal ease-out,
            pulse-success $animation-normal ease-out;

        input {
            color: $success;
        }
    }

    // 오답 (빨간색 + 흔들림)
    &--incorrect {
        animation:
            flash-error $animation-normal ease-out,
            shake $animation-normal ease-out;

        input {
            color: $error;
        }
    }
}